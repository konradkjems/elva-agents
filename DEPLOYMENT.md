# ğŸš€ Elva Widget Platform - Deployment Guide

## ğŸ“‹ Quick Deployment

### 1. Prepare for Deployment
```bash
# Run the deployment preparation script
npm run deploy
```

This script will:
- âœ… Check environment configuration
- âœ… Install dependencies
- âœ… Initialize database
- âœ… Build the application
- âœ… Generate embed codes
- âœ… Create deployment guide

### 2. Deploy to Production

#### Option A: Vercel (Recommended)
```bash
# Install Vercel CLI
npm i -g vercel

# Deploy
vercel --prod
```

#### Option B: Netlify
```bash
# Build and deploy
npm run deploy:netlify
```

#### Option C: Railway
1. Connect your GitHub repo to Railway
2. Railway will auto-detect Next.js and deploy
3. Set environment variables in Railway dashboard

#### Option D: DigitalOcean App Platform
1. Create `app.yaml` configuration
2. Connect GitHub repo
3. Deploy through DigitalOcean dashboard

## ğŸ”§ Environment Variables

Set these in your hosting platform:

```env
OPENAI_API_KEY=sk-your-production-key
MONGODB_URI=mongodb+srv://user:pass@cluster.mongodb.net/elva-agents
NEXT_PUBLIC_API_URL=https://your-domain.com
NEXTAUTH_SECRET=your-secret-key
```

## ğŸ“± Widget Integration

### For Customers
Customers can integrate widgets with a single script tag:

```html
<!-- Add before closing </body> tag -->
<script src="https://your-domain.com/api/widget-embed/WIDGET_ID"></script>
```

### Widget Integration
- **Auto-Detection API**: `/api/widget-embed/WIDGET_ID` (recommended)
  - Automatically detects widget type (Responses API or Legacy)
  - Includes all modern features (suggested responses, configurable messages)
  - Fallback to mock data if database is unavailable

### Admin Panel Integration
- Get embed codes directly from the admin panel
- Widget editor includes "Embed Code" tab
- Widget cards have "Get Embed Code" button
- Create widget page shows integration preview

## ğŸ¯ Post-Deployment Checklist

- [ ] Test widget integration on sample website
- [ ] Verify CORS settings work across domains
- [ ] Check OpenAI API quota and billing
- [ ] Monitor MongoDB connection
- [ ] Set up error tracking and monitoring
- [ ] Create customer onboarding documentation

## ğŸ” Troubleshooting

### Common Issues
- **CORS Errors**: Ensure domain is whitelisted in OpenAI settings
- **MongoDB Connection**: Verify connection string and network access
- **Widget Not Loading**: Check widget ID and API URL
- **SSL Errors**: Ensure HTTPS is properly configured

### Support
For technical support: support@elva-solutions.com

---
Generated by Elva Widget Platform Deployment Script
